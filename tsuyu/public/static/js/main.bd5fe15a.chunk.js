(this["webpackJsonptsuyu-web"]=this["webpackJsonptsuyu-web"]||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n(1),a=n.n(s),c=n(59),i=n.n(c),o=(n(70),n(24)),u=n(5),l=n(2),d=n(60),b=n(9),j=(n(90),n(39)),h=n.n(j),f=function(e){var t="button";return e.small&&(t+=" button-small"),e.transparent&&(t+=" button-transparent"),Object(r.jsx)("button",{className:"".concat(t," ").concat(e.className),type:e.type,onClick:function(){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)},disabled:e.isLoading,children:e.isLoading?Object(r.jsx)(h.a,{color:"#000000",size:8}):e.text})},p=(n(94),function(e){return Object(r.jsxs)("div",{style:{width:"100%"},children:[e.label&&Object(r.jsx)("label",{className:"input-label",htmlFor:e.id,children:e.label}),Object(r.jsx)("input",{className:"text-input",id:e.id,type:e.type,placeholder:e.placeholder,onChange:function(t){return e.onChange?e.onChange(t.target.value):null},disabled:e.disabled})]})}),O=(n(95),function(e){var t=Object(s.useState)(""),n=Object(l.a)(t,2),a=n[0],c=n[1],i=Object(s.useState)(""),o=Object(l.a)(i,2),u=o[0],d=o[1],j=Object(s.useState)(""),h=Object(l.a)(j,2),O=h[0],m=h[1],v=Object(s.useState)("login"),g=Object(l.a)(v,2),x=g[0],w=g[1],N=0,S=0;if(e.anchorElement){var y=window.innerWidth,k=e.anchorElement.getBoundingClientRect();N=y-k.right+20,S=k.bottom+20}return Object(r.jsxs)("form",{className:"login-popup",style:{right:N,top:S},onSubmit:function(t){e.isLoading||(null===t||void 0===t||t.preventDefault(),"login"===x?b.userService.login({username:a,password:u}):b.userService.register({username:a,password:u,email:O}))},children:[Object(r.jsx)("div",{className:"popup-arrow"}),Object(r.jsx)("label",{className:"login-error",children:e.error}),Object(r.jsx)(p,{id:"username",placeholder:"Username",onChange:function(e){return c(e)}}),Object(r.jsx)(p,{id:"password",placeholder:"Password",type:"password",onChange:function(e){return d(e)}}),"register"===x?Object(r.jsx)(p,{id:"email",placeholder:"Email",type:"email",onChange:function(e){return m(e)}}):null,Object(r.jsxs)("div",{className:"login-buttons",children:[e.showRegister&&"login"===x&&Object(r.jsx)(f,{type:"button",onClick:function(){return w("register")},small:!0,transparent:!0,text:"Create account"}),e.showRegister&&"register"===x&&Object(r.jsx)(f,{type:"button",onClick:function(){return w("login")},small:!0,transparent:!0,text:"Already have an account?"}),Object(r.jsx)(f,{text:"login"===x?"Log In":"Register",isLoading:e.isLoading})]})]})}),m=(n(96),function(e){var t=Object(b.useAuthenticationState)(),n=t.isLoggedIn,a=t.error,c=t.isLoading,i=Object(d.useSettings)().register_enabled,u=Object(s.useRef)(),j=Object(s.useState)(!1),h=Object(l.a)(j,2),f=h[0],p=h[1];return Object(s.useEffect)((function(){p(!1)}),[n]),Object(r.jsxs)("nav",{className:"nav-bar",children:[Object(r.jsx)("section",{className:"nav-start",children:Object(r.jsx)("h3",{className:"name",children:"tsuyu"})}),Object(r.jsxs)("section",{className:"nav-end",children:[Object(r.jsx)(o.b,{to:"",className:"home"===e.activePage?"nav-item active":"nav-item",children:"Home"}),Object(r.jsx)(o.b,{to:"contact",className:"contact"===e.activePage?"nav-item active":"nav-item",children:"Contact"}),n?Object(r.jsx)(o.b,{to:"dashboard",className:"dashboard"===e.activePage?"nav-item active":"nav-item",children:"Dashboard"}):Object(r.jsx)("button",{className:"nav-item",onClick:function(){return p(!f)},ref:function(e){return u.current=e},children:"Log in"})]}),f?Object(r.jsx)(O,{anchorElement:u.current,showRegister:i,error:a,isLoading:c}):null]})}),v=(n(102),function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("section",{className:"route",id:"contact",children:Object(r.jsxs)("section",{className:"contact",children:[Object(r.jsx)("h1",{className:"contact-title",children:"Contact"}),Object(r.jsxs)("p",{className:"contact-info",children:["For legal notices or takedown requests, please go contact me via ",Object(r.jsx)("a",{href:"mailto:filip.ekstrom98@gmail.com",className:"link",children:"email."})]}),Object(r.jsxs)("p",{className:"contact-info",children:["For other questions and answers, be sure to contact me either via ",Object(r.jsx)("a",{href:"mailto:filip.ekstrom98@gmail.com",className:"link",children:"email"})," or by joining my ",Object(r.jsx)("a",{href:"https://discord.gg/PhswpNNYTM",className:"link",children:"Discord Server."})]})]})})})}),g=(n(103),n(30)),x=n(132),w=n(13),N=n(63),S=function(){var e=Object(u.f)(),t=Object(s.useState)("files"),n=Object(l.a)(t,2),a=n[0],c=n[1],i=Object(g.useFileState)(),o=(i.currentPage,i.totalPages,i.files),d=i.isLoading,j=Object(b.useAuthenticationState)(),h=j.user,O=j.error,m=Object(s.useState)(""),v=Object(l.a)(m,2),S=v[0],y=v[1],k=Object(s.useState)(""),L=Object(l.a)(k,2),E=L[0],C=L[1],P=function(e){navigator.clipboard.writeText("".concat(w.a,"/").concat(e.name))},F=function(){b.userService.changePassword({password:S,newPassword:E})},$=function(e){if(e.name.includes(".png")||e.name.includes(".jpg")||e.name.includes(".gif")||e.name.includes(".jpeg")||e.name.includes(".webp")){var t="".concat(w.a,"/").concat(e.name);return Object(r.jsx)("div",{className:"row-name",children:Object(r.jsx)("img",{className:"row-image",src:t})})}return Object(r.jsx)("div",{className:"row-name"})},T=function(){g.fileService.loadMoreFiles()};return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("section",{className:"route",id:"dashboard",children:[Object(r.jsxs)("nav",{className:"dashboard-menu",children:[Object(r.jsx)("button",{className:"menu-item",onClick:function(){return c("files")},children:"Files"}),Object(r.jsx)("button",{className:"menu-item",onClick:function(){return c("account")},children:"Account"}),Object(r.jsx)("button",{className:"menu-item",onClick:function(){b.userService.logout(),e.push("home"),console.info("Logged out")},children:"Log Out"})]}),Object(r.jsx)("section",{className:"dashboard-content",children:function(){var e;switch(a){case"files":return Object(r.jsx)("section",{className:"dashboard-files",children:d?Object(r.jsx)("div",{className:"loading",children:Object(r.jsx)(N.BounceLoader,{color:"#44E384"})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("section",{className:"file-table",children:[Object(r.jsxs)("div",{className:"table-header",children:[Object(r.jsx)("span",{className:"header-name",children:"Preview"}),Object(r.jsx)("span",{className:"header-name",children:"Original file name"}),Object(r.jsx)("span",{className:"header-size",children:"Size"}),Object(r.jsx)("span",{className:"header-date",children:"Date uploaded"}),Object(r.jsx)("span",{className:"header-link",children:"Link"}),Object(r.jsx)("span",{className:"header-link",children:"Delete?"})]}),Object(r.jsx)("div",{className:"table-content",children:o.map((function(e){return Object(r.jsxs)("div",{className:"table-row",children:[$(e),Object(r.jsx)("div",{className:"row-name",children:e.originalName}),Object(r.jsx)("div",{className:"row-size",children:Object(r.jsx)("span",{children:e.fileSizeInKB>1e3?"".concat((e.fileSizeInKB/1e3).toFixed(2)," MB"):"".concat(e.fileSizeInKB," KB")})}),Object(r.jsx)("div",{className:"row-date",children:Object(r.jsx)("span",{children:Object(x.a)(new Date(e.createdAt),"dd MMM HH:mm aaa")})}),Object(r.jsx)(f,{className:"row-link",small:!0,transparent:!0,text:"Copy",onClick:function(){return P(e)}}),Object(r.jsx)(f,{className:"row-delete",small:!0,transparent:!0,text:"Delete",onClick:function(){return P(e)}})]},e.id)}))})]}),Object(r.jsx)("div",{className:"table-nav",children:Object(r.jsx)(f,{text:"Load more",className:"load-more-button",onClick:T})})]})});case"account":return Object(r.jsxs)("section",{className:"dashboard-account",children:[Object(r.jsx)(p,{disabled:!0,id:"username",placeholder:null===h||void 0===h?void 0:h.username,label:"Username"}),Object(r.jsx)(p,{disabled:!0,id:"email",placeholder:null!==(e=null===h||void 0===h?void 0:h.email)&&void 0!==e?e:"",label:"Email"}),Object(r.jsxs)("div",{className:"token-input",children:[Object(r.jsx)(p,{disabled:!0,id:"token",placeholder:null===h||void 0===h?void 0:h.apiToken,label:"Api Token"}),Object(r.jsx)(f,{text:"Copy",className:"token-copy",onClick:function(){return function(){var e;navigator.clipboard.writeText(null!==(e=null===h||void 0===h?void 0:h.apiToken)&&void 0!==e?e:"")}()}})]}),Object(r.jsxs)("form",{className:"password-update",onSubmit:function(){return F()},children:[Object(r.jsx)("label",{className:"password-update-error",children:O}),Object(r.jsx)("label",{className:"password-update-success",children:null===h||void 0===h?void 0:h.message}),Object(r.jsx)(p,{id:"oldpass",label:"Old password",type:"password",onChange:function(e){return y(e)}}),Object(r.jsx)(p,{id:"newpass",label:"New Password",type:"password",onChange:function(e){return C(e)}}),Object(r.jsx)(f,{text:"Update password",type:"button",onClick:function(){return F()}})]})]})}}()})]})})},y=n(31),k=n(19),L=(n(126),function(e){var t;return Object(r.jsxs)("div",{className:"upload-button-wrapper",children:[Object(r.jsx)("input",{type:"file",id:"upload-button",name:"files",style:{display:"none"},onChange:function(t){var n,r;return null===(n=e.onUpload)||void 0===n?void 0:n.call(e,null===(r=t.target.files)||void 0===r?void 0:r[0])},multiple:!1,disabled:0!==e.percentage}),Object(r.jsx)("label",Object(k.a)(Object(k.a)({htmlFor:"upload-button",id:"upload-label",className:"upload-label"},{progress:"50px"}),{},{children:"Click or drag file to upload"})),Object(r.jsx)("div",{className:"upload-progress",style:{width:"".concat(null!==(t=e.percentage)&&void 0!==t?t:0,"%")}})]})}),E=n(64),C=n.n(E),P=(n(127),{Version:"1.0",Name:"tsuyu",DestinationType:"ImageUploader, TextUploader, FileUploader",RequestMethod:"POST",RequestURL:"".concat("https://u.tro.moe","/upload"),Headers:{Authorization:"REPLACE_THIS"},Body:"MultipartFormData",FileFormName:"file",URL:"$response$"}),F=function(){var e=Object(b.useAuthenticationState)(),t=e.isLoggedIn,n=e.user,s=Object(g.useFileState)(),a=s.recentlyUploaded,c=s.uploadProgress,i=function(){var e,t=Object(k.a)({},P);(null===n||void 0===n?void 0:n.apiToken)&&(t.Headers.Authorization="Bearer ".concat(null!==(e=null===n||void 0===n?void 0:n.apiToken)&&void 0!==e?e:""));var r=new Blob([JSON.stringify(t,null,2)],{type:"application/json"});C()(r,"tsuyu.sxcu","application/json")},o=function(e){e&&g.fileService.uploadFile(e)};return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("section",{className:"route",id:"home",children:[Object(r.jsxs)("section",{className:"info",children:[Object(r.jsx)("h1",{className:"title",children:"tsuyu"}),Object(r.jsx)("h3",{className:"subtitle",children:"\u30c4\u30e6"})]}),Object(r.jsx)("section",{className:"interactions",children:t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(L,{onUpload:o,percentage:c}),(null===a||void 0===a?void 0:a.length)>0&&Object(r.jsx)("h4",{children:"Uploaded files (Last 3)"}),Object(y.a)(a).reverse().slice(0,3).map((function(e){return Object(r.jsxs)("div",{className:"recent-file",children:[Object(r.jsx)(f,{text:"Copy URL",onClick:function(){return function(e){navigator.clipboard.writeText(e)}(e)},small:!0}),Object(r.jsx)("span",{children:e.split("".concat(window.location.host,"/"))[1]})]},e)})),Object(r.jsxs)("div",{className:"interaction-buttons",children:[Object(r.jsx)(f,{text:"Github",className:"button-github",onClick:function(){return window.location.href="https://github.com/tromodolo/tsuyu"}}),Object(r.jsx)(f,{text:"ShareX config",className:"button-sharex",onClick:function(){return i()}})]})]}):Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"interaction-buttons wide",children:[Object(r.jsx)(f,{text:"Github",className:"button-github",onClick:function(){return window.location.href="https://github.com/tromodolo/tsuyu"}}),Object(r.jsx)(f,{text:"ShareX config",className:"button-sharex",onClick:function(){return i()}})]})})}),Object(r.jsx)("a",{className:"credits",href:"https://www.pixiv.net/en/artworks/71865345",children:"Art source: Hang"})]})})},$=function(){var e=Object(b.useAuthenticationState)().isLoggedIn;return Object(r.jsx)(o.a,{children:Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{path:"/contact",children:Object(r.jsxs)("main",{className:"content",children:[Object(r.jsx)(m,{activePage:"contact"}),Object(r.jsx)(v,{})]})}),e?Object(r.jsx)(u.a,{path:"/dashboard",children:Object(r.jsxs)("main",{className:"content",children:[Object(r.jsx)(m,{activePage:"dashboard"}),Object(r.jsx)(S,{})]})}):null,Object(r.jsx)(u.a,{path:"/",children:Object(r.jsxs)("main",{className:"content",children:[Object(r.jsx)(m,{activePage:"home"}),Object(r.jsx)(F,{})]})})]})})},T=n(10);Object(T.d)({include:["user"]});var A=function(){return Object(r.jsx)($,{})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,133)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(A,{})}),document.getElementById("root")),U()},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b}));var r=n(6),s=n.n(r),a=n(61),c=n(17),i=n(36),o=n.n(i),u=n(9),l="https://u.tro.moe",d="";function b(e,t,n,r,s){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(s.a.mark((function e(t,n,r,c,i){var u,b,j,h,f,p,O,m,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u="".concat(l,"/").concat(t),void 0!==c){b=Object(a.a)(c);try{for(b.s();!(j=b.n()).done;)h=j.value,u+="/".concat(h)}catch(s){b.e(s)}finally{b.f()}}if(void 0!==i)for(p in f=!0,i)u+=f?"?":"&",u+="".concat(p,"=").concat(i[p]),f=!1;return e.prev=3,e.next=6,o()({method:n,url:u,data:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null!==(m=d)&&void 0!==m?m:"")}});case 6:O=e.sent,e.next=17;break;case 9:if(e.prev=9,e.t0=e.catch(3),!(v=e.t0).response){e.next=16;break}O=v.response,e.next=17;break;case 16:throw new Error("Request failed");case 17:return e.abrupt("return",O.data);case 18:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}u.userQuery.api_key.subscribe((function(e){d=e}))},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(8),s=n(16),a=n(15),c=n(10),i=n(27),o=new(function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).store=e,s.files$=s.select((function(e){return e.files})),s.recentlyUploaded$=s.select((function(e){return e.recentlyUploaded})),s.uploadProgress$=s.select((function(e){return e.uploadProgress})),s.currentPage$=s.select((function(e){return e.currentPage})),s.totalPages$=s.select((function(e){return e.totalPages})),s.isLoading$=s.selectLoading(),s.error$=s.selectError(),s}return n}(c.a))(i.a)},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,s=n(8),a=n(16),c=n(15),i=n(10),o=new(Object(i.c)({name:"user",idKey:"_id"})(r=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.call(this,{})}return n}(i.b))||r)},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(8),s=n(16),a=n(15),c=n(10),i=n(26),o=new(function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).store=e,s.maxFileSizeBytes$=s.select((function(e){return e.max_file_size_bytes})),s.registerEnabled$=s.select((function(e){return e.register_enabled})),s.isLoading$=s.selectLoading(),s.error$=s.selectError(),s}return n}(c.a))(i.a)},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(8),s=n(16),a=n(15),c=n(10),i=n(21),o=new(function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).store=e,s.user$=s.select(),s.isLoggedIn$=s.select((function(e){return!!e.apiToken})),s.api_key=s.select((function(e){return e.apiToken})),s.isLoading$=s.selectLoading(),s.error$=s.selectError(),s}return n}(c.a))(i.a)},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,s=n(8),a=n(16),c=n(15),i=n(10),o=new(Object(i.c)({name:"settings",idKey:"_id"})(r=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.call(this,{})}return n}(i.b))||r)},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,s=n(8),a=n(16),c=n(15),i=n(10),o=new(Object(i.c)({name:"files",idKey:"_id"})(r=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.call(this,{currentPage:1,totalPages:1,files:[],canLoadMore:!1})}return n}(i.b))||r)},30:function(e,t,n){"use strict";var r=n(57);n.o(r,"fileService")&&n.d(t,"fileService",(function(){return r.fileService})),n.o(r,"useFileState")&&n.d(t,"useFileState",(function(){return r.useFileState}));n(20);var s=n(35);n.d(t,"fileService",(function(){return s.a}));var a=n(58);n.d(t,"useFileState",(function(){return a.a}));n(27)},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(6),s=n.n(r),a=n(19),c=n(17),i=n(8),o=n(29),u=n(13),l=n(26),d=new(function(){function e(t){Object(i.a)(this,e),this.store=t}return Object(o.a)(e,[{key:"fetchSettings",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.setLoading(!0),this.store.setError(""),e.next=4,Object(u.b)("settings","GET");case 4:(t=e.sent).error?this.store.setError("Invalid username or password."):this.store.update(Object(a.a)({},t.data)),this.store.setLoading(!1);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}())(l.a)},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(31),s=n(6),a=n.n(s),c=n(17),i=n(8),o=n(29),u=n(27),l=n(13),d=n(36),b=n.n(d),j=n(21),h=new(function(){function e(t,n){Object(i.a)(this,e),this.store=t,this.userStore=n}return Object(o.a)(e,[{key:"getFiles",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.setLoading(!0),this.store.setError(""),this.store.getValue(),e.prev=3,e.next=6,Object(l.b)("file/list","GET",void 0);case 6:(t=e.sent).error?this.store.setError(t.error):this.store.update({files:t.data,cursor:t.cursor}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.store.setError(e.t0.message);case 13:this.store.setLoading(!1);case 14:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadMoreFiles",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.setLoading(!0),this.store.setError(""),t=this.store.getValue(),e.prev=3,e.next=6,Object(l.b)("file/list","GET",void 0,void 0,{cursor:t.cursor});case 6:(n=e.sent).error?this.store.setError(n.error):this.store.update({files:[].concat(Object(r.a)(null!==(s=t.files)&&void 0!==s?s:[]),Object(r.a)(null!==(c=n.data)&&void 0!==c?c:[])),cursor:n.cursor}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.store.setError(e.t0.message);case 13:this.store.setLoading(!1);case 14:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"uploadFile",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var n,s,c,i,o,u,d=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.setLoading(!0),this.store.setError(""),n=this.userStore.getValue(),s=this.store.getValue(),e.prev=4,e.prev=5,(i=new FormData).append("file",t),e.next=10,b.a.post("".concat(l.a,"/file/upload"),i,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(n.apiToken)},onUploadProgress:function(e){var t=Math.round(e.loaded/e.total*100);d.store.update({uploadProgress:t})}});case 10:c=e.sent,e.next=21;break;case 13:if(e.prev=13,e.t0=e.catch(5),!(o=e.t0).response){e.next=20;break}c=o.response,e.next=21;break;case 20:throw new Error("Request failed");case 21:200===c.status?this.store.update({uploadProgress:0,recentlyUploaded:[].concat(Object(r.a)(null!==(u=s.recentlyUploaded)&&void 0!==u?u:[]),[c.data])}):this.store.setError(c.data),e.next=27;break;case 24:e.prev=24,e.t1=e.catch(4),this.store.setError(e.t1.message);case 27:this.store.setLoading(!1);case 28:case"end":return e.stop()}}),e,this,[[4,24],[5,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}())(u.a,j.a)},42:function(e,t){},51:function(e,t){},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(6),s=n.n(r),a=n(19),c=n(17),i=n(8),o=n(29),u=n(21),l=n(13),d=new(function(){function e(t){Object(i.a)(this,e),this.store=t}return Object(o.a)(e,[{key:"login",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.setLoading(!0),this.store.setError(""),this.store.update({message:void 0}),e.prev=3,e.next=6,Object(l.b)("user/login","POST",t);case 6:(n=e.sent).error?this.store.setError("Invalid username or password."):(console.log(n.data),this.store.update(Object(a.a)({},n.data))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.store.setError(e.t0.message);case 13:this.store.setLoading(!1);case 14:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.setLoading(!0),this.store.setError(""),e.prev=2,e.next=5,Object(l.b)("user/register","POST",t);case 5:(n=e.sent).error?this.store.setError(n.error):this.store.update(Object(a.a)({},n.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.store.setError(e.t0.message);case 12:this.store.setLoading(!1);case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){this.store.update({id:void 0,username:void 0,email:void 0,apiToken:void 0,isAdmin:void 0,lastUpdate:void 0,createdAt:void 0,message:void 0})}},{key:"changePassword",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.store.setLoading(!0),this.store.setError(""),this.store.update({message:void 0}),this.store.getValue(),e.prev=4,e.next=7,Object(l.b)("user/change-password","POST",t);case 7:(n=e.sent).error?this.store.setError(n.error):this.store.update({message:"Successfully updated password"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this.store.setError(e.t0.message);case 14:this.store.setLoading(!1);case 15:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()}]),e}())(u.a)},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),s=n(1),a=n(23),c=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(s.useState)(""),o=Object(r.a)(i,2),u=o[0],l=o[1],d=Object(s.useState)(),b=Object(r.a)(d,2),j=b[0],h=b[1],f=Object(s.useState)(!1),p=Object(r.a)(f,2),O=p[0],m=p[1];return Object(s.useEffect)((function(){var e=[a.a.isLoading$.subscribe((function(e){return c(e)})),a.a.error$.subscribe((function(e){return l(e)})),a.a.user$.subscribe((function(e){return h(e)})),a.a.isLoggedIn$.subscribe((function(e){return m(e)}))];return function(){e.map((function(e){return e.unsubscribe()}))}}),[]),{isLoggedIn:O,user:j,error:u,isLoading:n}}},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),s=n(1),a=n(22),c=n(34),i=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],i=t[1],o=Object(s.useState)(""),u=Object(r.a)(o,2),l=u[0],d=u[1],b=Object(s.useState)(!1),j=Object(r.a)(b,2),h=j[0],f=j[1],p=Object(s.useState)(0),O=Object(r.a)(p,2),m=O[0],v=O[1];return Object(s.useEffect)((function(){c.a.fetchSettings();var e=[a.a.isLoading$.subscribe((function(e){return i(e)})),a.a.error$.subscribe((function(e){return d(e)})),a.a.registerEnabled$.subscribe((function(e){return f(e)})),a.a.maxFileSizeBytes$.subscribe((function(e){return v(e)}))];return function(){e.map((function(e){return e.unsubscribe()}))}}),[]),{register_enabled:h,max_file_size_bytes:m,error:l,isLoading:n}}},57:function(e,t){},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),s=n(1),a=n(9),c=n(20),i=n(35),o=function(){var e=Object(a.useAuthenticationState)().isLoggedIn,t=Object(s.useState)(!1),n=Object(r.a)(t,2),o=n[0],u=n[1],l=Object(s.useState)(""),d=Object(r.a)(l,2),b=d[0],j=d[1],h=Object(s.useState)([]),f=Object(r.a)(h,2),p=f[0],O=f[1],m=Object(s.useState)([]),v=Object(r.a)(m,2),g=v[0],x=v[1],w=Object(s.useState)(0),N=Object(r.a)(w,2),S=N[0],y=N[1],k=Object(s.useState)(1),L=Object(r.a)(k,2),E=L[0],C=L[1],P=Object(s.useState)(1),F=Object(r.a)(P,2),$=F[0],T=F[1];return Object(s.useEffect)((function(){e&&i.a.getFiles();var t=[c.a.isLoading$.subscribe((function(e){return u(e)})),c.a.error$.subscribe((function(e){return j(e)})),c.a.files$.subscribe((function(e){return O(null!==e&&void 0!==e?e:[])})),c.a.recentlyUploaded$.subscribe((function(e){return x(null!==e&&void 0!==e?e:[])})),c.a.uploadProgress$.subscribe((function(e){return y(null!==e&&void 0!==e?e:0)})),c.a.currentPage$.subscribe((function(e){return C(e)})),c.a.totalPages$.subscribe((function(e){return T(e)}))];return function(){t.map((function(e){return e.unsubscribe()}))}}),[e]),{error:b,isLoading:o,files:p,recentlyUploaded:g,uploadProgress:S,currentPage:E,totalPages:$}}},60:function(e,t,n){"use strict";var r=n(42);n.o(r,"useSettings")&&n.d(t,"useSettings",(function(){return r.useSettings}));n(22),n(34);var s=n(54);n.d(t,"useSettings",(function(){return s.a}));n(26)},70:function(e,t,n){},9:function(e,t,n){"use strict";var r=n(51);n.o(r,"useAuthenticationState")&&n.d(t,"useAuthenticationState",(function(){return r.useAuthenticationState})),n.o(r,"userQuery")&&n.d(t,"userQuery",(function(){return r.userQuery})),n.o(r,"userService")&&n.d(t,"userService",(function(){return r.userService}));var s=n(23);n.d(t,"userQuery",(function(){return s.a}));var a=n(52);n.d(t,"userService",(function(){return a.a}));var c=n(53);n.d(t,"useAuthenticationState",(function(){return c.a}));n(21)},90:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){}},[[128,1,2]]]);
//# sourceMappingURL=main.bd5fe15a.chunk.js.map