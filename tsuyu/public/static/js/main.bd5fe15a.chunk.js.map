{"version":3,"sources":["components/Button.tsx","components/Input.tsx","components/Login.tsx","components/Navbar.tsx","pages/Contact.tsx","pages/Dashboard.tsx","components/UploadButton.tsx","pages/Home.tsx","Router.tsx","storage.ts","App.tsx","reportWebVitals.ts","index.tsx","state/Request.ts","state/files/file.query.ts","state/user/user.store.ts","state/settings/settings.query.ts","state/user/user.query.ts","state/settings/settings.store.ts","state/files/file.store.ts","state/files/index.ts","state/settings/settings.service.ts","state/files/file.service.ts","state/user/user.service.ts","state/user/user.hooks.ts","state/settings/settings.hooks.ts","state/files/file.hooks.ts","state/settings/index.ts","state/user/index.ts"],"names":["Button","props","className","small","transparent","type","onClick","disabled","isLoading","color","size","text","Input","style","width","label","htmlFor","id","placeholder","onChange","x","target","value","Login","useState","username","setUsername","password","setPassword","email","setEmail","setType","right","top","anchorElement","innerWidth","window","bounding","getBoundingClientRect","bottom","onSubmit","event","preventDefault","userService","login","register","error","val","showRegister","Navbar","useAuthenticationState","isLoggedIn","register_enabled","useSettings","loginButton","useRef","showLoginPopup","setShowLoginPopup","useEffect","to","activePage","ref","current","Contact","href","Dashboard","history","useHistory","navState","setNavState","useFileState","files","currentPage","totalPages","filesLoading","user","oldPassword","setOldPassword","newPassword","setNewPassword","copyUrlToClipboard","file","navigator","clipboard","writeText","API_URL","name","updatePassword","changePassword","renderImage","includes","url","src","loadMore","fileService","loadMoreFiles","logout","push","console","info","map","originalName","fileSizeInKB","toFixed","format","Date","createdAt","apiToken","copyTokenToClipboard","message","content","UploadButton","display","onUpload","multiple","percentage","shareXTemplate","process","Home","recentlyUploaded","uploadProgress","downloadShareX","template","Headers","Authorization","blob","Blob","JSON","stringify","download","uploadFile","length","reverse","slice","copyToClipboard","split","location","host","Router","path","persistState","include","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","ApiKey","SendRequest","endpoint","method","body","params","queryParams","a","undefined","key","first","axios","data","headers","res","axErr","response","Error","userQuery","api_key","subscribe","api","fileQuery","store","files$","select","state","recentlyUploaded$","uploadProgress$","currentPage$","totalPages$","isLoading$","selectLoading","error$","selectError","Query","fileStore","userStore","StoreConfig","idKey","Store","settingsQuery","maxFileSizeBytes$","max_file_size_bytes","registerEnabled$","settingsStore","user$","isLoggedIn$","canLoadMore","settingsService","this","setLoading","setError","update","getValue","cursor","userState","fileState","formData","FormData","append","post","onUploadProgress","prog","Math","round","loaded","total","status","log","isAdmin","lastUpdate","setIsLoading","setUser","loggedIn","setLoggedIn","subscriptions","it","unsubscribe","registerEnabled","setRegisterEnabled","maxFileSizeBytes","setMaxFileSizeBytes","fetchSettings","setFiles","setRecentlyUploaded","setUploadProgress","setCurrentPage","setTotalPages","getFiles"],"mappings":"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","file":"static/js/main.bd5fe15a.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./Button.scss\";\r\nimport BeatLoader from \"react-spinners/BeatLoader\";\r\ninterface ButtonProps {\r\n\tclassName?: string;\r\n\ttext: string;\r\n\tonClick?: () => void;\r\n\tisLoading?: boolean;\r\n\tsmall?: boolean;\r\n\ttransparent?: boolean;\r\n\ttype?: \"button\" | \"submit\" | \"reset\";\r\n}\r\n\r\nconst Button = (props: ButtonProps) => {\r\n\tlet className = \"button\";\r\n\r\n\tif (props.small) {\r\n\t\tclassName += \" button-small\";\r\n\t}\r\n\tif (props.transparent) {\r\n\t\tclassName += \" button-transparent\";\r\n\t}\r\n\r\n\treturn (\r\n\t\t<button className={`${className} ${props.className}`} type={props.type} onClick={() => props.onClick?.()} disabled={props.isLoading}>\r\n\t\t\t{props.isLoading ? <BeatLoader color=\"#000000\" size={8} /> : props.text}\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\nexport default Button;","import React from \"react\";\r\nimport \"./Input.scss\";\r\n\r\ninterface InputProps {\r\n\tid: string;\r\n\tplaceholder?: string;\r\n\tlabel?: string;\r\n\ttype?: \"text\" | \"password\" | \"number\" | \"email\",\r\n\tonChange?: (val: string) => void,\r\n\tdisabled?: boolean;\r\n}\r\n\r\nconst Input = (props: InputProps) => {\r\n\t\r\n\treturn (\r\n\t\t<div style={{width: \"100%\"}}>\r\n\t\t\t{props.label && <label className=\"input-label\" htmlFor={props.id}>{props.label}</label>}\r\n\t\t\t<input \r\n\t\t\t\tclassName=\"text-input\"\r\n\t\t\t\tid={props.id}\r\n\t\t\t\ttype={props.type}\r\n\t\t\t\tplaceholder={props.placeholder}\r\n\t\t\t\tonChange={(x) => props.onChange ? props.onChange(x.target.value) : null} \r\n\t\t\t\tdisabled={props.disabled}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Input;","import React, { FormEvent, useState } from \"react\";\r\nimport { useAuthenticationState, userService } from \"../state/user\";\r\nimport Button from \"./Button\";\r\nimport Input from \"./Input\";\r\nimport \"./Login.scss\";\r\n\r\ninterface LoginProps {\r\n\tanchorElement?: HTMLButtonElement | null;\r\n\tshowRegister?: boolean;\r\n\tisLoading?: boolean;\r\n\terror?: string;\r\n}\r\n\r\nconst Login = (props: LoginProps) => {\r\n\tconst [username, setUsername] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [type, setType] = useState<\"login\" | \"register\"> (\"login\");\r\n\r\n\tlet right = 0;\r\n\tlet top = 0;\r\n\r\n\tif (props.anchorElement){\r\n\t\tconst { innerWidth } = window;\r\n\t\tconst bounding = props.anchorElement.getBoundingClientRect();\r\n\t\tright = innerWidth - bounding.right + 20;\r\n\t\ttop = bounding.bottom + 20;\r\n\t}\r\n\r\n\tconst onLogin = (event?: FormEvent) => {\r\n\t\tif (props.isLoading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tevent?.preventDefault();\r\n\t\tif (type === \"login\") {\r\n\t\t\tuserService.login({ \r\n\t\t\t\tusername, \r\n\t\t\t\tpassword\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tuserService.register({ \r\n\t\t\t\tusername, \r\n\t\t\t\tpassword,\r\n\t\t\t\temail,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form className=\"login-popup\" style={{right, top}} onSubmit={onLogin}>\r\n\t\t\t<div className=\"popup-arrow\"></div>\r\n\t\t\t<label className=\"login-error\">{props.error}</label>\r\n\t\t\t<Input id={\"username\"} placeholder={\"Username\"} onChange={(val) => setUsername(val)} />\r\n\t\t\t<Input id={\"password\"} placeholder={\"Password\"} type={\"password\"} onChange={(val) => setPassword(val)} />\r\n\t\t\t{type === \"register\" \r\n\t\t\t\t? <Input id={\"email\"} placeholder={\"Email\"} type={\"email\"} onChange={(val) => setEmail(val)} /> \r\n\t\t\t\t: null\r\n\t\t\t}\r\n\t\t\t<div className=\"login-buttons\">\r\n\t\t\t\t{props.showRegister && type === \"login\" && <Button type={\"button\"} onClick={() => setType(\"register\")} small={true} transparent={true} text={\"Create account\"}/>}\r\n\t\t\t\t{props.showRegister && type === \"register\" && <Button type={\"button\"} onClick={() => setType(\"login\")} small={true} transparent={true} text={\"Already have an account?\"}/>}\r\n\t\t\t\t<Button text={type === \"login\" ? \"Log In\" : \"Register\"} isLoading={props.isLoading} />\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n};\r\n\r\nexport default Login;","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useSettings } from \"../state/settings\";\r\nimport { useAuthenticationState } from \"../state/user\";\r\nimport Login from \"./Login\";\r\nimport \"./Navbar.scss\";\r\n\r\ninterface NavbarProps {\r\n\tactivePage?: string;\r\n}\r\n\r\nconst Navbar = (props: NavbarProps) => {\r\n\tconst { isLoggedIn, error, isLoading } = useAuthenticationState();\r\n\tconst { register_enabled } = useSettings();\r\n\tconst loginButton = useRef<HTMLButtonElement | null>();\r\n\tconst [showLoginPopup, setShowLoginPopup] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetShowLoginPopup(false);\r\n\t}, [isLoggedIn]);\r\n\r\n\treturn (\r\n\t\t<nav className=\"nav-bar\">\r\n\t\t\t<section className=\"nav-start\">\r\n\t\t\t\t<h3 className=\"name\">tsuyu</h3>\r\n\t\t\t</section>\r\n\t\t\t<section className=\"nav-end\">\r\n\t\t\t\t<Link to=\"\" className={props.activePage  === \"home\" ? \"nav-item active\" : \"nav-item\"}>Home</Link>\r\n\t\t\t\t<Link to=\"contact\"  className={props.activePage  === \"contact\" ? \"nav-item active\" : \"nav-item\"}>Contact</Link>\r\n\t\t\t\t{isLoggedIn ? ( \r\n\t\t\t\t\t<Link to=\"dashboard\"  className={props.activePage  === \"dashboard\" ? \"nav-item active\" : \"nav-item\"}>Dashboard</Link>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<button className=\"nav-item\" onClick={() => setShowLoginPopup(!showLoginPopup)} ref={(x) => loginButton.current = x}>Log in</button>\r\n\t\t\t\t)}\r\n\t\t\t</section>\r\n\t\t\t{showLoginPopup ? (\r\n\t\t\t\t<Login anchorElement={loginButton.current} showRegister={register_enabled} error={error} isLoading={isLoading}/>\r\n\t\t\t): null}\r\n\t\t</nav>\r\n\t);\r\n};\r\n\r\nexport default Navbar;","import React from \"react\";\r\nimport \"./Contact.scss\";\r\n\r\nconst Contact = () => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<section className=\"route\" id=\"contact\">\r\n\t\t\t\t<section className=\"contact\">\r\n\t\t\t\t\t<h1 className=\"contact-title\">Contact</h1>\r\n\t\t\t\t\t<p className=\"contact-info\">\r\n\t\t\t\t\t\tFor legal notices or takedown requests, please go contact me via <a href=\"mailto:filip.ekstrom98@gmail.com\" className=\"link\">email.</a>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p className=\"contact-info\">\r\n\t\t\t\t\t\tFor other questions and answers, be sure to contact me either via <a href=\"mailto:filip.ekstrom98@gmail.com\" className=\"link\">email</a> or by joining my <a href=\"https://discord.gg/PhswpNNYTM\" className=\"link\">Discord Server.</a>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</section>\r\n\t\t\t</section>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Contact;","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { FaArrowLeft, FaArrowRight } from 'react-icons/fa';\r\n\r\nimport \"./Dashboard.scss\"\r\nimport { useAuthenticationState, userService } from \"../state/user\";\r\nimport { File, fileService, useFileState } from \"../state/files\";\r\nimport Button from \"../components/Button\";\r\nimport { format } from \"date-fns\";\r\nimport { API_URL } from \"../state/Request\";\r\nimport { BounceLoader } from \"react-spinners\";\r\nimport Input from \"../components/Input\";\r\n\r\nconst Dashboard = () => {\r\n\tconst history = useHistory();\r\n\tconst [navState, setNavState] = useState(\"files\");\r\n\tconst { currentPage, totalPages, files, isLoading: filesLoading } = useFileState();\r\n\tconst { user, error } = useAuthenticationState();\r\n\r\n\tconst [oldPassword, setOldPassword] = useState(\"\");\r\n\tconst [newPassword, setNewPassword] = useState(\"\");\r\n\r\n\tconst copyUrlToClipboard = (file: File) => {\r\n\t\tnavigator.clipboard.writeText(`${API_URL}/${file.name}`);\r\n\t}\r\n\r\n\tconst copyTokenToClipboard = () => {\r\n\t\tnavigator.clipboard.writeText(user?.apiToken ?? \"\");\r\n\t}\r\n\r\n\tconst updatePassword = () => {\r\n\t\tuserService.changePassword({\r\n\t\t\tpassword: oldPassword,\r\n\t\t\tnewPassword: newPassword,\r\n\t\t});\r\n\t}\r\n\t\r\n\tconst renderImage = (x: File) => {\r\n\t\tif (x.name.includes(\".png\") || x.name.includes(\".jpg\") || \r\n\t\t\tx.name.includes(\".gif\") || x.name.includes(\".jpeg\") ||\r\n\t\t\tx.name.includes(\".webp\")) {\r\n\t\t\tconst url = `${API_URL}/${x.name}`;\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"row-name\">\r\n\t\t\t\t\t<img className=\"row-image\" src={url} />\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"row-name\"></div>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tconst loadMore = () => {\r\n\t\tfileService.loadMoreFiles();\r\n\t}\r\n\r\n\tconst content = () => {\r\n\t\tswitch (navState) {\r\n\t\t\tcase \"files\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<section className=\"dashboard-files\">\r\n\t\t\t\t\t\t{filesLoading ? (\r\n\t\t\t\t\t\t\t<div className=\"loading\">\r\n\t\t\t\t\t\t\t\t<BounceLoader color={\"#44E384\"} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<section className=\"file-table\">\r\n\t\t\t\t\t\t\t\t<div className=\"table-header\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"header-name\">Preview</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"header-name\">Original file name</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"header-size\">Size</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"header-date\">Date uploaded</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"header-link\">Link</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"header-link\">Delete?</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"table-content\">\r\n\t\t\t\t\t\t\t\t\t{files.map((x) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"table-row\" key={x.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{renderImage(x)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row-name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{x.originalName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row-size\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{x.fileSizeInKB > 1000 ? `${(x.fileSizeInKB / 1000).toFixed(2)} MB` : `${x.fileSizeInKB} KB`}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row-date\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{format(new Date(x.createdAt), \"dd MMM HH:mm aaa\")}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className=\"row-link\" small={true} transparent={true} text={\"Copy\"} onClick={() => copyUrlToClipboard(x)}/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button className=\"row-delete\" small={true} transparent={true} text={\"Delete\"} onClick={() => copyUrlToClipboard(x)}/>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t<div className=\"table-nav\">\r\n\t\t\t\t\t\t\t\t<Button \r\n\t\t\t\t\t\t\t\t\ttext={\"Load more\"}\r\n\t\t\t\t\t\t\t\t\tclassName=\"load-more-button\" \r\n\t\t\t\t\t\t\t\t\tonClick={loadMore} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</section>\r\n\t\t\t\t);\r\n\t\t\tcase \"account\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<section className=\"dashboard-account\">\r\n\t\t\t\t\t\t<Input disabled={true} id={\"username\"} placeholder={user?.username} label={\"Username\"}/>\r\n\t\t\t\t\t\t<Input disabled={true} id={\"email\"} placeholder={user?.email ?? \"\"} label={\"Email\"}/>\r\n\t\t\t\t\t\t<div className=\"token-input\">\r\n\t\t\t\t\t\t\t<Input disabled={true} id={\"token\"} placeholder={user?.apiToken} label={\"Api Token\"}/>\r\n\t\t\t\t\t\t\t<Button text={\"Copy\"} className=\"token-copy\" onClick={() => copyTokenToClipboard()}/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<form className=\"password-update\" onSubmit={() => updatePassword()}>\r\n\t\t\t\t\t\t\t<label className=\"password-update-error\">{error}</label>\r\n\t\t\t\t\t\t\t<label className=\"password-update-success\">{user?.message}</label>\r\n\t\t\t\t\t\t\t<Input id={\"oldpass\"} label={\"Old password\"} type={\"password\"} onChange={(val: string) => setOldPassword(val)}/>\r\n\t\t\t\t\t\t\t<Input id={\"newpass\"} label={\"New Password\"} type={\"password\"} onChange={(val: string) => setNewPassword(val)}/>\r\n\t\t\t\t\t\t\t<Button text={\"Update password\"} type=\"button\" onClick={() => updatePassword()} />\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</section>\r\n\t\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tconst onLogout = () => {\r\n\t\tuserService.logout();\r\n\t\thistory.push(\"home\");\r\n\t\tconsole.info(\"Logged out\");\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<section className=\"route\" id=\"dashboard\">\r\n\t\t\t\t<nav className=\"dashboard-menu\">\r\n\t\t\t\t\t<button className=\"menu-item\" onClick={() => setNavState(\"files\")}>Files</button>\r\n\t\t\t\t\t<button className=\"menu-item\" onClick={() => setNavState(\"account\")}>Account</button>\r\n\t\t\t\t\t<button className=\"menu-item\" onClick={onLogout}>Log Out</button>\r\n\t\t\t\t</nav>\r\n\t\t\t\t<section className=\"dashboard-content\">\r\n\t\t\t\t\t{content()}\r\n\t\t\t\t</section>\r\n\t\t\t</section>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Dashboard;","import React from \"react\";\r\nimport \"./UploadButton.scss\";\r\n\r\ninterface UploadButtonProps {\r\n\tpercentage?: number;\r\n\tonUpload?: (file?: File) => void;\r\n}\r\n\r\nconst UploadButton = (props: UploadButtonProps) => {\r\n\treturn (\r\n\t\t<div className=\"upload-button-wrapper\">\r\n\t\t\t<input type=\"file\" id=\"upload-button\" name=\"files\" style={{display: \"none\"}} onChange={(x) => props.onUpload?.(x.target.files?.[0])} multiple={false} disabled={props.percentage !== 0}/>\r\n\t\t\t<label htmlFor=\"upload-button\" id=\"upload-label\" className=\"upload-label\" {...{\"progress\": \"50px\"}}>\r\n\t\t\t\tClick or drag file to upload\r\n\t\t\t</label>\r\n\t\t\t<div className=\"upload-progress\" style={{width: `${props.percentage ?? 0}%`}}></div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UploadButton;","import React from \"react\";\r\nimport Button from \"../components/Button\";\r\nimport UploadButton from \"../components/UploadButton\";\r\nimport { fileService, useFileState } from \"../state/files\";\r\nimport { useAuthenticationState } from \"../state/user\";\r\nimport download from \"downloadjs\";\r\n\r\nimport \"./Home.scss\";\r\n\r\nconst shareXTemplate = {\r\n\t\"Version\": \"1.0\",\r\n\t\"Name\": \"tsuyu\",\r\n\t\"DestinationType\": \"ImageUploader, TextUploader, FileUploader\",\r\n\t\"RequestMethod\": \"POST\",\r\n\t\"RequestURL\": `${process.env.REACT_APP_API_URL}/upload`,\r\n\t\"Headers\": {\r\n\t  \"Authorization\": \"REPLACE_THIS\",\r\n\t},\r\n\t\"Body\": \"MultipartFormData\",\r\n\t\"FileFormName\": \"file\",\r\n\t\"URL\": \"$response$\",\r\n}\r\n\r\nconst Home = () => {\r\n\tconst { isLoggedIn, user } = useAuthenticationState();\r\n\tconst { recentlyUploaded, uploadProgress } = useFileState();\r\n\r\n\tconst downloadShareX = () => {\r\n\t\tconst template = {...shareXTemplate};\r\n\t\tif (user?.apiToken){\r\n\t\t\ttemplate.Headers.Authorization = `Bearer ${user?.apiToken ?? \"\"}`;\r\n\t\t}\r\n\t\tconst blob = new Blob([JSON.stringify(template, null, 2)], {type : 'application/json'});\r\n\t\tdownload(blob, \"tsuyu.sxcu\", \"application/json\");\r\n\t}\r\n\r\n\tconst copyToClipboard = (x: string) => {\r\n\t\tnavigator.clipboard.writeText(x);\r\n\t}\r\n\r\n\tconst onUpload = (file?: File) => {\r\n\t\tif (!file) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tfileService.uploadFile(file);\r\n\t};\r\n\r\n\tconst upload = () => {\r\n\t\tif (!isLoggedIn) {\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"interaction-buttons wide\">\r\n\t\t\t\t\t\t<Button text=\"Github\" className=\"button-github\" onClick={() => window.location.href = \"https://github.com/tromodolo/tsuyu\"} />\r\n\t\t\t\t\t\t<Button text=\"ShareX config\" className=\"button-sharex\" onClick={() => downloadShareX()}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<UploadButton onUpload={onUpload} percentage={uploadProgress} />\r\n\t\t\t\t{(recentlyUploaded?.length > 0) && <h4>Uploaded files (Last 3)</h4>}\r\n\t\t\t\t{[...recentlyUploaded].reverse().slice(0, 3).map((x) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={x} className=\"recent-file\">\r\n\t\t\t\t\t\t\t<Button text={\"Copy URL\"} onClick={() => copyToClipboard(x)} small={true} />\r\n\t\t\t\t\t\t\t<span>{x.split(`${window.location.host}/`)[1]}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t\t<div className=\"interaction-buttons\">\r\n\t\t\t\t\t<Button text=\"Github\" className=\"button-github\" onClick={() => window.location.href = \"https://github.com/tromodolo/tsuyu\"} />\r\n\t\t\t\t\t<Button text=\"ShareX config\" className=\"button-sharex\" onClick={() => downloadShareX()}/>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t)\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<section className=\"route\" id=\"home\">\r\n\t\t\t\t<section className=\"info\">\r\n\t\t\t\t\t<h1 className=\"title\">tsuyu</h1>\r\n\t\t\t\t\t<h3 className=\"subtitle\">ツユ</h3>\r\n\t\t\t\t\t{/* <p className=\"description\"> */}\r\n\t\t\t\t\t\t{/* File uploading service lovingly crafted using Rust. */}\r\n\t\t\t\t\t\t{/* <br />\t\t\t\t\t\t\r\n\t\t\t\t\t\tFast uploads, sharing and file history, but more to come. */}\r\n\t\t\t\t\t{/* </p> */}\r\n\t\t\t\t</section>\r\n\t\t\t\t<section className=\"interactions\">\r\n\t\t\t\t\t{upload()}\r\n\t\t\t\t</section>\r\n\t\t\t\t<a className=\"credits\" href=\"https://www.pixiv.net/en/artworks/71865345\">Art source: Hang</a>\r\n\t\t\t</section>\r\n\t\t</>\r\n\t)\r\n};\r\n\r\nexport default Home;","import React from \"react\";\r\nimport {\r\n\tBrowserRouter,\r\n\tSwitch,\r\n\tRoute\r\n} from \"react-router-dom\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport Contact from \"./pages/Contact\";\r\nimport Dashboard from \"./pages/Dashboard\";\r\nimport Home from \"./pages/Home\";\r\nimport { useAuthenticationState } from \"./state/user\";\r\n\r\nconst Router = () => {\r\n\tconst { isLoggedIn } = useAuthenticationState();\r\n\r\n\treturn (\r\n\t\t<BrowserRouter>\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route path=\"/contact\">\r\n\t\t\t\t\t<main className=\"content\">\r\n\t\t\t\t\t\t<Navbar activePage=\"contact\"></Navbar>\r\n\t\t\t\t\t\t<Contact />\r\n\t\t\t\t\t</main>\r\n\t\t\t\t</Route>\r\n\t\t\t\t{isLoggedIn ? (\r\n\t\t\t\t\t<Route path=\"/dashboard\">\r\n\t\t\t\t\t\t<main className=\"content\">\r\n\t\t\t\t\t\t\t<Navbar activePage=\"dashboard\"></Navbar>\r\n\t\t\t\t\t\t\t<Dashboard />\r\n\t\t\t\t\t\t</main>\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t) : null}\r\n\t\t\t\t<Route path=\"/\">\r\n\t\t\t\t\t<main className=\"content\">\r\n\t\t\t\t\t\t<Navbar activePage=\"home\"></Navbar>\r\n\t\t\t\t\t\t<Home />\r\n\t\t\t\t\t</main>\r\n\t\t\t\t</Route>\r\n\t\t\t</Switch>\r\n\t\t</BrowserRouter>\r\n\t);\r\n};\r\n\r\nexport default Router;","import { persistState } from \"@datorama/akita\";\r\n\r\nexport const InitPersist = () => {\r\n\tpersistState({\r\n\t\tinclude: [\"user\"],\r\n\t});\r\n};\r\n","import React from 'react';\r\nimport Router from './Router';\r\nimport { InitPersist } from './storage';\r\n\r\nInitPersist();\r\n\r\nfunction App() {\r\n  return (\r\n    <Router></Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","import axios, { AxiosError, AxiosResponse } from \"axios\";\r\nimport { userQuery } from \"./user\";\r\n\r\nexport const API_URL = process.env.REACT_APP_API_URL;\r\nlet ApiKey: string | undefined = \"\";\r\nuserQuery.api_key.subscribe((api) => {\r\n\tApiKey = api;\r\n});\r\n\r\nexport interface ApiResponse<T> {\r\n\tdata?: T;\r\n\terror?: boolean;\r\n\terrorMessage: string;\r\n\ttotalItems?: number;\r\n\tcursor?: string;\r\n};\r\n\r\nexport type Endpoint = \r\n\t| \"file/upload\"\r\n\t| \"settings\"\r\n\t| \"file/delete\"\r\n\t| \"file/list\"\r\n\t| \"user/login\"\r\n\t| \"user/register\"\r\n\t| \"user/reset-token\"\r\n\t| \"user/change-password\";\r\nexport type Method = \"GET\" | \"POST\" | \"PUT\" | \"DELETE\";\r\n\r\nexport async function SendRequest<T>(\r\n\tendpoint: Endpoint,\r\n\tmethod: Method,\r\n\tbody?: { [key: string]: any },\r\n\tparams?: [value: string],\r\n\tqueryParams?: { [key: string]: any },\r\n): Promise<ApiResponse<T>> {\r\n\tlet url = `${API_URL}/${endpoint}`;\r\n\tif (params !== undefined) {\r\n\t\tfor (const val of params) {\r\n\t\t\turl += `/${val}`;\r\n\t\t}\r\n\t}\r\n\r\n\tif (queryParams !== undefined) {\r\n\t\tlet first = true;\r\n\t\tfor (const key in queryParams) {\r\n\t\t\tif (first) {\r\n\t\t\t\turl += \"?\";\r\n\t\t\t} else {\r\n\t\t\t\turl += \"&\";\r\n\t\t\t}\r\n\t\t\turl += `${key}=${queryParams[key]}`;\r\n\t\t\tfirst = false;\r\n\t\t}\r\n\t}\r\n\r\n\tlet res: AxiosResponse;\r\n\ttry {\r\n\t\tres = await axios({\r\n\t\t\tmethod,\r\n\t\t\turl,\r\n\t\t\tdata: body,\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\"Authorization\": `Bearer ${ApiKey ?? \"\"}`,\r\n\t\t\t}\r\n\t\t});\r\n\t} catch (err: any) {\r\n\t\tconst axErr: AxiosError = err;\r\n\t\tif (axErr.response){\r\n\t\t\tres = axErr.response;\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Request failed\");\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn res.data;\r\n}","import { Query } from \"@datorama/akita\";\r\nimport { FileState } from \"./file.model\";\r\nimport { fileStore, FileStore } from \"./file.store\";\r\n\r\nexport class FileQuery extends Query<FileState> {\r\n\tfiles$ = this.select((state) => state.files);\r\n\trecentlyUploaded$ = this.select((state) => state.recentlyUploaded);\r\n\tuploadProgress$ = this.select((state) => state.uploadProgress);\r\n\tcurrentPage$ = this.select((state) => state.currentPage);\r\n\ttotalPages$ = this.select((state) => state.totalPages);\r\n\r\n\tisLoading$ = this.selectLoading();\r\n\terror$ = this.selectError();\r\n\r\n\tconstructor(protected store: FileStore) {\r\n\t\tsuper(store);\r\n\t}\r\n}\r\n\r\nexport const fileQuery = new FileQuery(fileStore);\r\n","import { Store, StoreConfig } from \"@datorama/akita\";\r\nimport { User } from \"./user.model\";\r\n\r\nconst CreateInitialState = () => ({});\r\n\r\n@StoreConfig({\r\n\tname: \"user\",\r\n\tidKey: \"_id\",\r\n})\r\nexport class UserStore extends Store<User> {\r\n\tconstructor() {\r\n\t\tsuper(CreateInitialState());\r\n\t}\r\n}\r\n\r\nexport const userStore = new UserStore();\r\n","import { Query } from \"@datorama/akita\";\r\nimport { Settings } from \"./settings.model\";\r\nimport { settingsStore, SettingsStore } from \"./settings.store\";\r\n\r\nexport class SettingsQuery extends Query<Settings> {\r\n\tmaxFileSizeBytes$ = this.select((state) => state.max_file_size_bytes);\r\n\tregisterEnabled$ = this.select((state) => state.register_enabled);\r\n\r\n\tisLoading$ = this.selectLoading();\r\n\terror$ = this.selectError();\r\n\r\n\tconstructor(protected store: SettingsStore) {\r\n\t\tsuper(store);\r\n\t}\r\n}\r\n\r\nexport const settingsQuery = new SettingsQuery(settingsStore);\r\n","import { Query } from \"@datorama/akita\";\r\nimport { User } from \"./user.model\";\r\nimport { UserStore, userStore } from \"./user.store\";\r\n\r\nexport class UserQuery extends Query<User> {\r\n\tuser$ = this.select();\r\n\tisLoggedIn$ = this.select((state) => !!state.apiToken);\r\n\tapi_key = this.select((state) => state.apiToken);\r\n\r\n\tisLoading$ = this.selectLoading();\r\n\terror$ = this.selectError();\r\n\r\n\tconstructor(protected store: UserStore) {\r\n\t\tsuper(store);\r\n\t}\r\n}\r\n\r\nexport const userQuery = new UserQuery(userStore);\r\n","import { Store, StoreConfig } from \"@datorama/akita\";\r\nimport { Settings } from \"./settings.model\";\r\n\r\nconst CreateInitialState = () => ({});\r\n\r\n@StoreConfig({\r\n\tname: \"settings\",\r\n\tidKey: \"_id\",\r\n})\r\nexport class SettingsStore extends Store<Settings> {\r\n\tconstructor() {\r\n\t\tsuper(CreateInitialState());\r\n\t}\r\n}\r\n\r\nexport const settingsStore = new SettingsStore();\r\n","import { Store, StoreConfig } from \"@datorama/akita\";\r\nimport { FileState } from \"./file.model\";\r\n\r\nconst CreateInitialState = (): FileState => ({\r\n\tcurrentPage: 1,\r\n\ttotalPages: 1,\r\n\tfiles: [],\r\n\tcanLoadMore: false\r\n});\r\n\r\n@StoreConfig({\r\n\tname: \"files\",\r\n\tidKey: \"_id\",\r\n})\r\nexport class FileStore extends Store<FileState> {\r\n\tconstructor() {\r\n\t\tsuper(CreateInitialState());\r\n\t}\r\n}\r\n\r\nexport const fileStore = new FileStore();\r\n","export * from \"./file.model\";\r\nexport * from \"./file.query\";\r\nexport * from \"./file.service\";\r\nexport * from \"./file.hooks\";\r\nexport { FileStore } from \"./file.store\";","import { SendRequest } from \"../Request\";\r\nimport { Settings } from \"./settings.model\";\r\nimport { settingsStore, SettingsStore } from \"./settings.store\";\r\n\r\nexport class SettingsService {\r\n\tconstructor(private store: SettingsStore) {}\r\n\r\n\tasync fetchSettings() {\r\n\t\tthis.store.setLoading(true);\r\n\t\tthis.store.setError(\"\");\r\n\r\n\t\tconst res = await SendRequest<Settings>(\"settings\", \"GET\");\r\n\t\tif (!res.error){\r\n\t\t\tthis.store.update({...res.data});\r\n\t\t} else {\r\n\t\t\tthis.store.setError(\"Invalid username or password.\");\r\n\t\t}\r\n\r\n\t\tthis.store.setLoading(false);\r\n\t}\r\n}\r\n\r\nexport const settingsService = new SettingsService(settingsStore);\r\n","import { FileStore, fileStore } from \"./file.store\";\r\nimport { File as IFile, FileCount, FileState } from \"./file.model\";\r\nimport { API_URL, SendRequest } from \"../Request\";\r\nimport axios, { AxiosError, AxiosResponse } from \"axios\";\r\nimport { UserStore } from \"../user\";\r\nimport { userStore } from \"../user/user.store\";\r\n\r\nexport class FileService {\r\n\tconstructor(private store: FileStore, private userStore: UserStore) {}\r\n\r\n\tasync getFiles() {\r\n\t\tthis.store.setLoading(true);\r\n\t\tthis.store.setError(\"\");\r\n\r\n\t\tconst state: FileState = this.store.getValue();\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await SendRequest<IFile[]>(\"file/list\", \"GET\", undefined);\r\n\t\t\tif (!res.error){\r\n\t\t\t\tthis.store.update({\r\n\t\t\t\t\tfiles: res.data,\r\n\t\t\t\t\tcursor: res.cursor,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.store.setError(res.error);\r\n\t\t\t}\r\n\t\t} catch (e: any) {\r\n\t\t\tthis.store.setError(e.message);\r\n\t\t}\r\n\r\n\t\tthis.store.setLoading(false);\r\n\t}\r\n\r\n\tasync loadMoreFiles() {\r\n\t\tthis.store.setLoading(true);\r\n\t\tthis.store.setError(\"\");\r\n\r\n\t\tconst state: FileState = this.store.getValue();\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await SendRequest<IFile[]>(`file/list`, \"GET\", undefined, undefined, { cursor: state.cursor });\r\n\t\t\tif (!res.error){\r\n\t\t\t\tthis.store.update({\r\n\t\t\t\t\tfiles: [\r\n\t\t\t\t\t\t...state.files ?? [],\r\n\t\t\t\t\t\t...res.data ?? []\r\n\t\t\t\t\t],\r\n\t\t\t\t\tcursor: res.cursor,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.store.setError(res.error);\r\n\t\t\t}\r\n\t\t} catch (e: any) {\r\n\t\t\tthis.store.setError(e.message);\r\n\t\t}\r\n\r\n\t\tthis.store.setLoading(false);\r\n\t}\r\n\r\n\t// async getNextPage() {\r\n\t// \tconst state: FileState = this.store.getValue();\r\n\t// \tif (state.currentPage >= state.totalPages){\r\n\t// \t\treturn;\r\n\t// \t}\r\n\t// \tthis.store.update({\r\n\t// \t\tcurrentPage: state.currentPage + 1,\r\n\t// \t})\r\n\t// \tawait this.getFiles();\r\n\t// }\r\n\r\n\t// async getPreviousPage() {\r\n\t// \tconst state: FileState = this.store.getValue();\r\n\t// \tif (state.currentPage <= 1){\r\n\t// \t\treturn;\r\n\t// \t}\r\n\t// \tthis.store.update({\r\n\t// \t\tcurrentPage: state.currentPage - 1,\r\n\t// \t})\r\n\t// \tawait this.getFiles();\r\n\t// }\r\n\r\n\tasync uploadFile(file: File) {\r\n\t\tthis.store.setLoading(true);\r\n\t\tthis.store.setError(\"\");\r\n\t\tconst userState = this.userStore.getValue();\r\n\t\tconst fileState = this.store.getValue();\r\n\r\n\t\ttry {\r\n\t\t\tlet res: AxiosResponse;\r\n\t\t\ttry {\r\n\t\t\t\tlet formData = new FormData();\r\n\t\t\t\tformData.append(\"file\", file);\r\n\r\n\t\t\t\tres = await axios.post(\r\n\t\t\t\t\t`${API_URL}/file/upload`,\r\n\t\t\t\t\tformData,\r\n\t\t\t\t\t{ \r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\"Content-Type\": \"multipart/form-data\",\r\n\t\t\t\t\t\t\t\"Authorization\": `Bearer ${userState.apiToken}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonUploadProgress: (prog) => {\r\n\t\t\t\t\t\t\tconst percentage = Math.round(prog.loaded / prog.total * 100);\r\n\t\t\t\t\t\t\tthis.store.update({\r\n\t\t\t\t\t\t\t\tuploadProgress: percentage,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t} catch (err: any) {\r\n\t\t\t\tconst axErr: AxiosError = err;\r\n\t\t\t\tif (axErr.response){\r\n\t\t\t\t\tres = axErr.response;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"Request failed\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (res.status === 200){\r\n\t\t\t\tthis.store.update({\r\n\t\t\t\t\tuploadProgress: 0,\r\n\t\t\t\t\trecentlyUploaded: [\r\n\t\t\t\t\t\t...(fileState.recentlyUploaded ?? []),\r\n\t\t\t\t\t\tres.data,\r\n\t\t\t\t\t]\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.store.setError(res.data);\r\n\t\t\t}\r\n\t\t} catch (e: any) {\r\n\t\t\tthis.store.setError(e.message);\r\n\t\t}\r\n\r\n\t\tthis.store.setLoading(false);\r\n\t}\r\n}\r\n\r\nexport const fileService = new FileService(fileStore, userStore);\r\n","import { UserStore, userStore } from \"./user.store\";\r\nimport { PasswordUpdate, User, UserLogin, UserRegister } from \"./user.model\";\r\nimport { SendRequest } from \"../Request\";\r\n\r\nexport class UserService {\r\n\tconstructor(private store: UserStore) {}\r\n\r\n\tasync login(data: UserLogin) {\r\n\t\tthis.store.setLoading(true);\r\n\t\tthis.store.setError(\"\");\r\n\t\tthis.store.update({message: undefined});\r\n\r\n\t\ttry{\r\n\t\t\tconst res = await SendRequest<User>(\"user/login\", \"POST\", data);\r\n\t\t\tif (!res.error){\r\n\t\t\t\tconsole.log(res.data);\r\n\t\t\t\tthis.store.update({...res.data});\r\n\t\t\t} else {\r\n\t\t\t\tthis.store.setError(\"Invalid username or password.\");\r\n\t\t\t}\r\n\t\t} catch (e: any) {\r\n\t\t\tthis.store.setError(e.message);\r\n\t\t}\r\n\r\n\t\tthis.store.setLoading(false);\r\n\t}\r\n\r\n\tasync register(data: UserRegister) {\r\n\t\tthis.store.setLoading(true);\r\n\t\tthis.store.setError(\"\");\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await SendRequest<User>(\"user/register\", \"POST\", data);\r\n\t\t\tif (!res.error){\r\n\t\t\t\tthis.store.update({...res.data});\r\n\t\t\t} else {\r\n\t\t\t\tthis.store.setError(res.error);\r\n\t\t\t}\r\n\t\t} catch (e: any) {\r\n\t\t\tthis.store.setError(e.message);\r\n\t\t}\r\n\r\n\t\tthis.store.setLoading(false);\r\n\t}\r\n\r\n\tlogout() {\r\n\t\tthis.store.update({\r\n\t\t\tid: undefined,\r\n\t\t\tusername: undefined,\r\n\t\t\temail: undefined,\r\n\t\t\tapiToken: undefined,\r\n\t\t\tisAdmin: undefined,\r\n\t\t\tlastUpdate: undefined,\r\n\t\t\tcreatedAt: undefined,\r\n\t\t\tmessage: undefined,\r\n\t\t});\r\n\t}\r\n\r\n\tasync changePassword(data: PasswordUpdate) {\r\n\t\tthis.store.setLoading(true);\r\n\t\tthis.store.setError(\"\");\r\n\t\tthis.store.update({message: undefined});\r\n\t\tconst state = this.store.getValue();\r\n\r\n\t\ttry{\r\n\t\t\tconst res = await SendRequest<PasswordUpdate>(\"user/change-password\", \"POST\", data);\r\n\t\t\tif (!res.error){\r\n\t\t\t\tthis.store.update({\r\n\t\t\t\t\tmessage: \"Successfully updated password\",\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.store.setError(res.error);\r\n\t\t\t}\r\n\t\t} catch (e: any) {\r\n\t\t\tthis.store.setError(e.message);\r\n\t\t}\r\n\r\n\t\tthis.store.setLoading(false);\r\n\t}\r\n}\r\n\r\nexport const userService = new UserService(userStore);\r\n","import { useEffect, useState } from \"react\";\r\nimport { User } from \"./user.model\";\r\nimport { userQuery } from \"./user.query\";\r\n\r\nexport const useAuthenticationState = (): {\r\n\terror: string;\r\n\tisLoading: boolean;\r\n\tisLoggedIn: boolean;\r\n\tuser: User | undefined;\r\n} => {\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\tconst [error, setError] = useState(\"\");\r\n\tconst [user, setUser] = useState<User>();\r\n\tconst [loggedIn, setLoggedIn] = useState<boolean>(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst subscriptions: any[] = [\r\n\t\t\tuserQuery.isLoading$.subscribe((x) => setIsLoading(x)),\r\n\t\t\tuserQuery.error$.subscribe((x) => setError(x)),\r\n\t\t\tuserQuery.user$.subscribe((x) => setUser(x)),\r\n\t\t\tuserQuery.isLoggedIn$.subscribe((x) => setLoggedIn(x)),\r\n\t\t];\r\n\r\n\t\treturn () => {\r\n\t\t\tsubscriptions.map((it) => it.unsubscribe());\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn {\r\n\t\tisLoggedIn: loggedIn,\r\n\t\tuser,\r\n\t\terror,\r\n\t\tisLoading,\r\n\t};\r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport { settingsQuery } from \"./settings.query\";\r\nimport { settingsService } from \"./settings.service\";\r\n\r\nexport const useSettings = (): {\r\n\tregister_enabled: boolean;\r\n\tmax_file_size_bytes: number;\r\n\terror: string;\r\n\tisLoading: boolean;\r\n} => {\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\tconst [error, setError] = useState(\"\");\r\n\tconst [registerEnabled, setRegisterEnabled] = useState<boolean>(false);\r\n\tconst [maxFileSizeBytes, setMaxFileSizeBytes] = useState<number>(0);\r\n\r\n\tuseEffect(() => {\r\n\t\tsettingsService.fetchSettings();\r\n\r\n\t\tconst subscriptions: any[] = [\r\n\t\t\tsettingsQuery.isLoading$.subscribe((x) => setIsLoading(x)),\r\n\t\t\tsettingsQuery.error$.subscribe((x) => setError(x)),\r\n\t\t\tsettingsQuery.registerEnabled$.subscribe((x) => setRegisterEnabled(x)),\r\n\t\t\tsettingsQuery.maxFileSizeBytes$.subscribe((x) => setMaxFileSizeBytes(x)),\r\n\t\t];\r\n\r\n\t\treturn () => {\r\n\t\t\tsubscriptions.map((it) => it.unsubscribe());\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn {\r\n\t\tregister_enabled: registerEnabled,\r\n\t\tmax_file_size_bytes: maxFileSizeBytes,\r\n\t\terror,\r\n\t\tisLoading,\r\n\t};\r\n};\r\n","import { useEffect, useState } from \"react\";\r\nimport { useAuthenticationState } from \"../user\";\r\nimport { File } from \"./file.model\";\r\nimport { fileQuery } from \"./file.query\";\r\nimport { fileService } from \"./file.service\";\r\n\r\nexport const useFileState = (): {\r\n\terror: string;\r\n\tisLoading: boolean;\r\n\tfiles: File[],\r\n\trecentlyUploaded: string[];\r\n\tuploadProgress: number;\r\n\tcurrentPage: number,\r\n\ttotalPages: number,\r\n} => {\r\n\tconst { isLoggedIn } = useAuthenticationState();\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\tconst [error, setError] = useState(\"\");\r\n\tconst [files, setFiles] = useState<File[]>([]);\r\n\tconst [recentlyUploaded, setRecentlyUploaded] = useState<string[]>([]);\r\n\tconst [uploadProgress, setUploadProgress] = useState(0);\r\n\tconst [currentPage, setCurrentPage] = useState<number>(1);\r\n\tconst [totalPages, setTotalPages] = useState<number>(1);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isLoggedIn){\r\n\t\t\tfileService.getFiles();\r\n\t\t}\r\n\r\n\t\tconst subscriptions: any[] = [\r\n\t\t\tfileQuery.isLoading$.subscribe((x) => setIsLoading(x)),\r\n\t\t\tfileQuery.error$.subscribe((x) => setError(x)),\r\n\t\t\tfileQuery.files$.subscribe((x) => setFiles(x ?? [])),\r\n\t\t\tfileQuery.recentlyUploaded$.subscribe((x) => setRecentlyUploaded(x ?? [])),\r\n\t\t\tfileQuery.uploadProgress$.subscribe((x) => setUploadProgress(x ?? 0)),\r\n\t\t\tfileQuery.currentPage$.subscribe((x) => setCurrentPage(x)),\r\n\t\t\tfileQuery.totalPages$.subscribe((x) => setTotalPages(x)),\r\n\t\t];\r\n\r\n\t\treturn () => {\r\n\t\t\tsubscriptions.map((it) => it.unsubscribe());\r\n\t\t};\r\n\t}, [isLoggedIn]);\r\n\r\n\treturn {\r\n\t\terror,\r\n\t\tisLoading,\r\n\t\tfiles,\r\n\t\trecentlyUploaded,\r\n\t\tuploadProgress,\r\n\t\tcurrentPage,\r\n\t\ttotalPages,\r\n\t};\r\n};\r\n","export * from \"./settings.model\";\r\nexport * from \"./settings.query\";\r\nexport * from \"./settings.service\";\r\nexport * from \"./settings.hooks\";\r\nexport { SettingsStore } from \"./settings.store\";\r\n","export * from \"./user.model\";\r\nexport * from \"./user.query\";\r\nexport * from \"./user.service\";\r\nexport * from \"./user.hooks\";\r\nexport { UserStore } from \"./user.store\";\r\n"],"sourceRoot":""}